/* $Id: ChangeLog,v 1.1259 2001-02-15 08:50:45 sandervl Exp $ */

 2001-02-15: Sander van Leeuwen <sandervl@xs4all.nl>
    - COMDLG32: o Ignore OFN_FILEMUSTEXIST flag in GetSaveFileNameA/W
                  (NT4 seems to ignore it too and it fixes the save dialog
                   in ElstarFormular 2000)

 2001-02-14: knut stange osmundsen <knut.stange.osmundsen@mynd.no>
    - Win32k.lib:
                o Corrected build breaker: log.h should not be included.
                  log.h was removed from the CINLCUDES two days ago.

 2001-02-14: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o Allocate TLS index of module before loading the dll it needs
                  (some apps assume their executable index is always zero)
                  (fixes crash in BrMSX)
                o Must use EXC_CallHandler to call RtlUnwind handler
                  (fixes crash during RaiseException in BrMSX)
    - OPENGL\GLU:
                o Removed initterm.cpp. Use dllentry.obj instead
    - INCLUDE\misc.h:
                o Print file and function name before executing an int 3. (DebugInt3)
    - *\initterm.cpp:
                o Wrong calling convention for CRT_Init/Term, ctordtorInit/Term
                o VAC 3.6.5 ctordtorInit/Term takes one parameter
    - USER32:   o Delay SetFocus when called during processing of WM_SETFOCUS
                  message (not allowed by PM).
                  (fixes keyboard focus in ElstarFormular 2000)

 2000-02-13: Michal Necasek <mike@mendelu.cz>
    - USER32:   o Wrong unicode<->ascii translation for some listbox & combobox
                  messages. Must check if the control style includes LB/CB_HASSTRINGS.
                  (CB_FINDSTRING, CB_FINDSTRINGEXACT, CB_SELECTSTRING,
                   LB_FINDSTRING, LB_FINDSTRINGEXACT, LB_SELECTSTRING)

 2001-02-12: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - Win32k.lib:
                o Removed /src/win32k/include from the CFLAGS.

 2001-02-11: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - Win32k:   o Added symbols for the 14062D kernels.
                o Added a query API for getting memory information.
                o Added force preload option - should be very useful when
                  debugging Ring 3 apps with ICAT. (Option -F)

 2001-02-11: Sander van Leeuwen <sandervl@xs4all.nl>
    - ODINCRT:  o Completed runtime dll for VAC 3.6.5
    - WINMM, GLU, CRTDLL, KERNEL32:
                o Compile fixes for VAC 3.6.5
    - RASAPI32: o Can't use LXLITE as it crashes on this binary
    - KERNEL32: o Check handle in LocalLock and return NULL if invalid
                  (some apps use LocalLock to get access to GDI objects; doesn't
                   work in Odin (TODO))

 2001-02-10: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o Check if window has been destroyed before accessing
                  this pointer again in SendInternalMessage.
                  (fixes heap corruption in MS Visual C++ 4.2 install)
                  TODO: Needs a permanent and correct solution as this
                        can happen in several other places.
                        Also a potential problem in user32 classes (InfoPtr).
                o Set last error to ERROR_INVALID_INDEX for invalid class word
                  index.

 2001-02-09: Sander van Leeuwen <sandervl@xs4all.nl>
    - COMCTL32: o Register controls in LibMain, not in DLL_InitTerm
    - KERNEL32: o Re-register dll if DosFreeModule failed with ERROR_INVALID_ACCESS
                  Dll refuses to unload if it has an active exitlist handler
                  or depends on a dll that registered an exitlist handler.
                  In this case the handle remains valid and the entrypoint of
                  the dll is NOT called for DLL_PROCESS_DETACH. The next time
                  DosLoadModule is called, the entrypoint (and RegisterLXDll)
                  isn't called (DLL_PROCESS_ATTACH).
                  WORKAROUND: Re-register the dll so future functions that
                              use this dll calls don't fail.
                  (fixes crash in shell32 in TextPad 4)
                o shared & code heap umalloc changed (now more meaningful debug
                  messages in case of heap corruption)
    - USER32:   o WM_MINIMIZE/WS_MAXIMIZE support added to CreateWindow
                  (fixes size of main InstallShield window for Microsoft Visual
                   C++ 4.2)
                o Fixed FS corruption in DIALOG_DlgDirList (c library function calls)

 2001-02-08: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o Standard in/out/error handle fix. Disable change during
                  console init.
                  (fixes output of console applications; input doesn't work well yet)
    - USER32:   o Dialog control fix. Creating them with CreateWindowExW does not
                  work since our standard user32 controls are still ASCII.
                  (fixes missing icon control in Acrobat Distiller window)

 2001-02-08: Michal Necasek <michalnec@volny.cz>
    - KERNEL32: o RtlUnwind bugfix

 2001-02-04: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o Wrong error set in GetDlgItem. Must be ERROR_CONTROL_ID_NOT_FOUND.
                  (verified in NT4, SP6)

 2001-02-03: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o Get/SetWindowLongA/W, Get/SetWindowWord: must set
                  last error to ERROR_INVALID_WINDOW_HANDLE if window not found.
                  (verified in NT4, SP6)
                  Must also return ERROR_INVALID_INDEX if index is out of range.
                  (used to return ERROR_INVALID_PARAMETER) (verified in NT4, SP6)
                o Temporary hack to force focus to newly created window
                  (if no Odin window has focus after sending WM_ACTIVATE, set
                   focus to window that received the activate message)
                  (fixes wrong keyboard focus in RealPlayer 8)

 2001-02-02: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o DrawEdge bugfixes (signed/unsigned char mismatches)
                  (fixes lines in properties dialog of RealPlayer 8)
                o Fixed incorrect rounding in dialog control size calculation
                  (fixes wrong height of some dialog controls (rp8 pref. dialog lines))
                o Don't unregister class if there are still windows that use it.

 2001-02-02: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - Win32k:   o Added option for the All-In-One-Object fix to be able
                  to debug PE executables thru the ICAT. Works with pe2lx
                  and win32k.sys.
                  -1<+|-|[*]>
                    +: Applied when needed.                 (checked)
                    -: Never applied (use this to debug).   (not checked)
                    *: Allways applied. (default)           (gray)
                  It's also added to Win32kCC as a three state checkbutton.

                  WARNING! This option should only be used for debugging
                  and will cause your system to crash if used with based
                  images!
    - tools\Common:
                o Minor changes in the fileformat classes to use kFile.

 2001-02-01: Sander van Leeuwen <sandervl@xs4all.nl>
    - GDI32:    o LineDDA fix (wrong calling convention)
                  (fixes crash in Solitaire)
    - USER32:   o clientHeight bugfix. Check hwnd instead of pHps->hwnd.
                  (pHps can be NULL)
                  (fixes crash in Solitaire)
    - INSTALL:  o Include ChangeLog-2001 in daily build
    - COMDLG32: o Merged some changes from Wine (extra notification in
                  FileOpenDlgProc95 & OFN_NOCHANGEDIR support (also added
                  to Unicode version of file open dialog))
                o Removed workaround for Acrobat Reader file open dialog
                  (Wine update fixed it)
