/* $Id: ChangeLog,v 1.1630 2001-08-03 17:44:12 sandervl Exp $ */

 2001-08-03: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o Temporarily disabled new name lookup (resources) until
                  the real problem is located (wrc).
                  (fixes preference page in Opera)

 2001-08-02: Sander van Leeuwen <sandervl@xs4all.nl>
    - GDI32:    o Set codepage of HDC returned by CreateDCA
    - COMDLG32: o Set codepage of HDC returned by PrintDlgA
                  (fixes codepage problems while printing in Opera)

 2001-07-29: knut st. osmundsen <kosmunds@csc.com>
    - win32k:   o Merged in a patch from Rafal which as a final attempt to find
                  a symbol file will look thru the pmdfvers.lst file.

 2001-07-31: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o PostThreadMessage & DDE callback change for new wgss

 2001-07-29: knut st. osmundsen <kosmunds@csc.com>
    - Custombuild, Makefiles:
                o Made the custombuild simpler by reusing the common makefiles.
                  Any initterm.obj is replaced by an empty dummy object and the
                  make is invoked with CUSTOMBUILD=1. makefile in /src have the
                  common targets all prefixed with custombuild_.
                o Merged odin32.post.emx.mk into odin32.post.vac3.mk.

 2001-07-30: Sander van Leeuwen <sandervl@xs4all.nl>
    - WINMM:    o Rewrote timeGetSystemTime & timeGetTime
    - KERNEL32: o Fix for names of dlls in custom build
    - USER32/GDI32/KERNEL32:
                o Custom build changes
    - WGSS50:   o WGSS update

 2001-07-29: knut st. osmundsen <kosmunds@csc.com>
    - Makefiles:
                o Force fastdep to scan all files if -a is specified to nmake.
    - Win32k/test:
                o Wrote stupid test app to profile child process execution
                  on different OSes.
                  Current results are found in source (PrfTstProcess.c).

 2001-07-29: Sander van Leeuwen <sandervl@xs4all.nl>
    - COMCTL32/COMDLG32/GDI32/KERNEL32/MSVFW32/USER32/SHELL32/WSOCK32/WINMM
      RPCRT4:
                o Updates for custom build (different resource table names)
    - KERNEL32: o Added exports to change the root keys of the registry
                  and to change the name of dlls to be loaded next
    - CUSTOMBUILD:
                o Updates

 2001-07-28: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o Set/GetWindowWord changes (must handle GWW_ID, GWW_HINSTANCE
                  and GWW_HWNDPARENT
                o Ported ArrangeIconicWindows from Wine (not complete yet)
                o Rewrote Get/SetDoubleClickTime & SwapMouseButton
                o Don't call O32_GetLastActivePopup
                  (TODO: rewrite it)
    - KERNEL32: o Rewrote FatalAppExitA/W, FatalExit, Beep, IsBadHugeReadPtr,
                  IsBadHugeWritePtr
                o Removed O32_HeapCreate/Destroy calls; return rtl heap handle
                o No longer use Open32's GetProcAddress or GetModuleFileName
    - USER32/KERNEL32:
                o Moved WaitForInputIdle & AttachThreadInput from user32 to
                  kernel32
    - TOOLS\INSTALL:
                o Create temp directory in windows dir

 2001-07-22: Sander van Leeuwen <sandervl@xs4all.nl>
    - TOOLS\INSTALL:
                o Added some quartz.dll keys
    - COMCTL32: o Status window bugfix; check part number boundary
                  (fixes crash in AudioGalaxy)
    - USER32:   o IsWindowVisible fix; check WS_CHILD flag before calling GetParent
                  (fixes invisible characters while typing in edit control
                   of AudioGalaxy)

 2001-07-21: Sander van Leeuwen <sandervl@xs4all.nl>
    - DINPUT, DPLAYX, ICMP, IMAGEHLP, IMM32, LZ32,
      MSVFW32, OLEPRO32, RICHED32, URLMON, VERSION, WININET
                o Added Wine license

    - AVIFIL32, SHELL32, COMCTL32, COMDLG32, MSACM32, NTDLL, OLE32, OLAUT32,
      SHDOCVW, SETUPAPI, SHLWAPI, OLECLI32, OLEDLG, OLESVR32, RPCRT4
                o Replaced Wine license with updated version
    - COMCTL32: o Resync with Wine (20010720); comboex, comctl32undoc, rebar,
                  imagelist, toolbar, pager
    - MSVFW32:  o Resync with Wine (20010720); all
    - AVIFIL32: o Resync with Wine (20010720); all
    - GDI32:    o Fixed brush leak in InternalTextOutA
                  (fixes Macromedia Flash 5 error messages)

 2001-07-20: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o Moved wsnprintf to user32
    - USER32:   o Removed FatalAppExitA/W (already in kernel32)
    - SHLWAPI:  o Removed WINE_StringFromCLSID & StringFromGUID2 (not used)
                o Removed several string function that were not used or exported
    - NTDLL:    o Replaced 64 bits math assembly functions (disassembled Wine C code
                  compiled with VAC 3.6.5)
    - ODINCRT:  o Export 64 bits math rtl functions
                o Added 64 bits math rtl functions for VAC 3.0 (assembly;
                  borrowed from VAC 3.6.5)
                  NOTE: __divi64 might cause problems (in theory) since
                        it uses the FPU and doesn't save the FPU state
    - OLE32/WINMM/KERNEL32/USER32/GDI32/COMCTL32/COMDLG32/SHLWAPI/SHELL32/
      RPCRT4/WSOCK32/VERSION:
                o Rewrote initterm + debug logging to allow us to build
                  a single dll containing the code of many Odin dlls
    - CUSTOMBUILD:
                o Example of creating a custom dll with the Odin32 environment
                  that can be used for a ported win32 app. (not done yet)

 2001-07-19: Sander van Leeuwen <sandervl@xs4all.nl>
    - DOC:      o Added license for WGSS50
    - TOOLS\INSTALL:
                o Include new license in WarpIN install script + package
    - TOOLS\DAILYBUILD:
                o Add WGSS50.lic to daily zipfiles
    - COMDLG32: o Use printer dialog function in WGSS50
    - WGSS50:   o Added new WGSS dll that fixes several printing problems
    - KERNEL32: o lstrncmpiA/W bugfix; broke resource lookup in Acrobat
                  Distiller (did not exactly work the way Wine code expected it)

 2001-07-19: Achim Hasenmueller <achimha@innotek.de>
    - LICENSE:  o added WGSS50.LIC which contains the official license
                  of the WGSS50.DLL module that is included with all
                  Odin builds. This is a license contract between
                  InnoTek Systemberatung GmbH (http://www.innotek.de)
                  and the individual Odin user. The library is provided
                  free of charge. The main requirement is that every user
                  need to own a valid OS/2 license (this also includes
                  eComStation of course).
                  Every distribution of Odin will also contain this
                  license file and the WarpIn archives will show the
                  license during installation and require acceptance.
                  For any questions about the license, please contact
                  me via email. Note that the Odin license specifically
                  allows redistribution of Odin with custom applications
                  and as soon as the WGSS50 license is included, this also
                  applies to WGSS50.DLL.

                  The reason we include WGSS50 (a subset of Open32 used
                  by IBM for Netscape Communicator 4.61 for OS/2) is that
                  it contains numerous improvements over Open32 and it
                  allows us more easily to replace Open32/WGSS50 APIs
                  by custom functions.

 2001-07-17: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o HeapCreate now creates a separate heap (_ucreate) instead
                  of sharing the same heap as Odin.
                  (lowers the chance of fatal crashes on heap corruption;
                   hangs in exitlist)
                o Implemented HeapValidate
                o GlobalReAlloc bugfix; must check if pointer has a handle
                  associated with it.
                  (RealDraw install calls GlobalReAlloc with pointer returned
                   by GlobalLock(handle))

 2001-07-16: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o RegEnumKeyExW fix (lpszClass can be NULL)
                o Faster resource lookup functions (Wine)
    - USER32:   o Allocate more memory for icon bitmap before calling
                  GpiCreateBitmap. This function seems to touch more bytes
                  than necessary (??).
    - GDI32:    o AddFontResourceA: ignore if called with filename of PE
                  executable (return 1; gets rid of error message in Photoshop 6)

 2001-07-15: Sander van Leeuwen <sandervl@xs4all.nl>
    - COMDLG32: o Ported Wine printer dialog code (inactive due to missing
                  functions in winspool)
    - USER32:   o Translate WM_VSCROLL & WM_HSCROLL
                o Do not use imports not available in Warp 3's PMWINX
                  (WaitForInputIdle & GetAsyncKeyState)
                o There is no close button in Warp 3 (OS/2 look & feel)
    - KERNEL32: o Do not call WaitForInputIdle in WinExec on Warp 3 systems.

 2001-07-14: Sander van Leeuwen <sandervl@xs4all.nl>
    - PELDR:    o Fix for parsing cmd line consisting of directory with spaces
    - USER32:   o Get menu font from os2.ini (OS/2 look & feel)
                o Full window drag now works for Odin windows
    - GDI32:    o Implemented StartDocW

 2001-07-13: Sander van Leeuwen <sandervl@xs4all.nl>
    - COMDLG32: o Fix for windows 3.1 style file dialog
    - COMCTL32: o Bad listview pointer checks cause crashes in details
                  view of file dialogs
                  (TODO: Details view is still not right)
    - KERNEL32: o Check for NULL pointer in lstrlenA/W
                  (fixes crash during AutoCAD 14 install)
    - USER32:   o Removed very old check for negative x or y coordinates during
                  window creation.
                  (file open dialog in InstallShield doesn't show weird edit control
                   anymore and the MS Word 97 main window looks better now)
                o RegisterClassA/W: check icon first before copying it
                  (gets rid of some annoying warnings in the logfile)
    - GDI32:    o Change BITMAPINFO height if negative
                  (fixes failing StretchDIBits calls with Matrox display driver)

 2001-07-12: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o Atom fixes
    - OLEAUT32: o Added RegisterActiveObject, RevokeActiveObject &
                  GetActiveObject from Wine.

 2001-07-10: Sander van Leeuwen <sandervl@xs4all.nl>
    - COMDLG32: o Don't clear filename when selecting of switching
                  directory is file open/save dialog.

 2001-07-10: knut st. osmundsen <kosmunds@csc.com>
    - WIN32K:   o Made DosKillProcessEx framework.
                o Tried to fix missing unlocks of environment block.
    - KERNEL32: o Tried to fix missing unlocks of environment block.
                o Fixed module not found problem when a Pe2Lx is dynamically
                  loaded several times.
                o Defined env.var. ODIN32.FAIL_IF_UNREGISTEREDLX to make
                  LoadLibraryEx fail on unregistered LX dlls. This will fix
                  the most annoying int 3's when starting Opera on debug Odin.
                  (Two int 3 per netscape/2 plugin checked.)

 2001-07-09: knut st. osmundsen <kosmunds@csc.com>:
    - CRTDLL:   o When renaming dlls we still use the original importlibrary
                  and .def-file names. ORGTARGET exist for that purpose.
    - NTDLL:    o Link with crtdll.lib.
    - VERSION:  o Link with crtdll.lib.
    - WIN32K:   o Updated LieList with CrtDll -> CrtDll32 renaming.

 2001-07-09: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o Directly import registry functions from REGISTRY.DLL
    - GDI32:    o Never use object handle 0
                  (fixes bad icons in dialogs)
    - USER32:   o Same edit fix as applied yesterday, but this time for
                  single line edit control painting.
                  (Opera url editbox now displays selected text properly)

 2001-07-08: Achim Hasenmueller <achimha@innotek.de>
    - WSOCK32:  o error message to human readable text translation
                  for WSASetLastError (debug version)
                o implemented IPPROTO_IP support for setsockopt
                  (not fully done)
                o reset semaphore in WSAEnumNetworkEvents
    - USER32:   o deleted user32\old. It is still in the CVS attic
                  so in case you need it, you can get it from CVS

 2001-07-08: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o Some icon fixes
                o Changed scrollbar behaviour in OS/2 mode; scrollbar doesn't
                  jump back to last click position when moving the mouse
                  outside the scroll window during scrolling.
                o Changed menu behaviour in OS/2 mode; no mouse tracking
                  when right or left mouse button not pressed.
                o Clipboard (Get/SetClipboardData: must translated open32
                  to kernel32 global memory handles (due to Global memory
                  api rewrite)
                o Key translation for arrow keys and insert/del, home/end, page up/down
                  added (WM_CHAR message translation)
                o Edit control bugfix for drawing selected text
    - KERNEL32: o More pointer checks added to GlobalLock/Unlock
                o Add default rename entry for crtdll
                o Fixed FS corruption in atom functions (wrapper for LookupAtom)
    - CRTDLL:   o Renamed to crtdll32 to avoid problems with some Lotus
                  apps that come with their own crtdll
    - NTDLL:    o Link with crtdll32.lib
    - VERSION:  o Link with crtdll32.lib
    - SHLWAPI:  o Link with crtdll32.lib
    - PELDR:    o Fix for file not found error

 2001-07-08: knut st. osmundsen <kosmunds@csc.com>
    - KERNEL32: o Added call in initterm to tell win32k where the Odin32
                  environment block is. (Its in Open32, and I don't think
                  it is reallocated.)
                o Added early initiation of Win32k loaded EXE. This corrected
                  problems with GetModuleHandleA returing -1 to MSVCRT.
    - WIN32K:   o Fixed environment block problem. The environment variables is
                  not updated in the original env.block. So, win32k needs to
                  be told where to find the Odin32 environment block to correctly
                  find dlls using the PATH.
                o Corrected crosspage fixup bug.
                o Set no internal fixups flag in LX header for most executables
                  in an attempt to convice OS/2 to load them where they wanna be
                  loaded (usually 0x00400000).
                o Can now tell difference between the debug kernels.

 2001-07-07: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o Rewrote atom functions (no longer relies on Open32)
                o Fixed GetAtomNameW
    - GDI32:    o Don't use Open32 IsBad* memory functions directly
    - COMDLG32: o PrintDlg fix: must translated open32 to kernel32 global
                  memory handles (due to Global memory api rewrite)

 2001-07-07: Achim Hasenmueller <achimha@innotek.de>
    - WS2_32:   o import WSAEventSelect from WSOCK32 (although a
                  Winsock 2.0 API, it makes more sense to be implemented
                  in the Winsock 1.1 stack)
                o import WSAEnumNetworkEvents from WSOCK32 (same reason)
    - WSOCK32:  o enhanced WSAAsyncSelect processing to allow both
                  window handle and event semaphore notification
                o implemented WSAEventSelect
                o implemented WSAEnumNetworkEvents (not correct)

 2001-07-07: knut st. osmundsen <kosmunds@csc.com>
    - URLMON:   o Stubbed HlinkSimpleNavigateToString and RegisterBindStatusCallback
                  to fix SYS2048 during RealPlayer install.
    - WIN32K:   o Fixed the DBExpert bug in the longdllname code.
                  BTW. Thanks to Randell at Sundial Systems and Alex Newman
                  for reporting this and begin very helpful tracking it down.
                o The longdllname feature now differs from the OS/2 loader on
                  one points: <br>
                  It is able to find (DosQueryModuleHandle) for dlls using
                  internal names which includes the .DLL extention. <br>
                  The longdllname feature don't currently support names with
                  extention .DLL like extentions with base name lengths from
                  4-7 chars. I will fix this some day.<br>

 2001-07-06: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o HeapAlloc must return pointers aligned at 8 byte boundary
                o GlobalAlloc must return pointers aligned at 8 byte boundary
                  (SDK docs + verified in NT4, SP6)
                o Better checks in GlobalFree for invalid handles/pointers
                  (InvestmentView seems to call it with a GDI handle; why??)
                o LocalReAlloc bugfix
    - USER32:   o Must return 16 bits icon & cursor handles
                  (fixes crash in Acrobat Reader 4)
    - GDI32:    o GetDIBits must only return color information when lpvBits
                  is not NULL.
                  (fixes Opera crash (heap corruption) with new heap code)
    - PELDR:    o Report error when file not found.

 2001-07-05: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o WM_WINDOWPOSCHANGED dispatch bugfix (introduced yesterday)
                o WinHelpA fixes (use shared memory for sending information
                  to winhlp32)
    - KERNEL32: o Added GlobalFix and GlobalUnfix
                o Local memory functions now use Global memory functions
                o Ported Wine Global memory functions (we no longer depend
                  on Open32 for these)

 2001-07-04: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o Partial implementation of ToAsciiEx (just calls ToAscii)
                o VkKeyScanExA/W: call VkKeyScanA/W
                o MapVirtualKeyExA/W: call MapVirtualKeyA/W
                o SetParent bugfix; even though the win32 coordinates might
                  not change, the PM coordinates can. We must make sure the
                  child stays at the same position (y) relative to the
                  (new) parent.
                  (Cool Edit Pro LE play buttons now at the right position)
                o Send WM_SETICON to frame window with converted win32 icon
                  (application icon now visible in task list)
                o Quick fix for window creation:
                  Before a window has processed WM_NCCREATE:
                  - GetTopWindow can't return that window handle
                  - GetWindow(parent, GW_CHILD) can't return that window handle
                  - IsChild works
                  TODO: Does this affect more functions?? (other GetWindow ops)
                  (verified in NT4, SP6)
                  TODO: Must add window to parent's child list after WM_NCCREATE
                        and rewrite GetWindow & GetTopWindow
                  (fix for crash in MP3 Explorer)

    - GDI32:    o Workaround for applications that depend on 16 bits
                  GDI object handles.
                  (TODO: must create our own 16 bits handles)
                  (fixes crash in Cool Edit Pro LE)

 2001-07-03: knut st. osmundsen <kosmunds@csc.com>
    - KERNEL32: o Improoved the Unhandled exception message by
                  trying to provide modulename and some kind of obj/offset.
    - FastDep:  o (synced with OS2Tools) Make better use of data in evt.
                   existing .depend file so that only changed files are processed.

 2001-07-03: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o Executable load fix
                  (fixes crash during RealPlayer 8 install)
                o Allow loading of OS/2 dlls for Odin32 apps (like Opera)
    - USER32:   o ToAscii & GetKeyboardState fixes
                  (for Putty keyboard input)
