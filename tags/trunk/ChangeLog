 /* $Id: ChangeLog,v 1.651 2000-01-15 16:37:35 sandervl Exp $ */

 2000-01-15: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32\NEW: Fixed scroll repaints (never use GetMessage with window
                      handle as that can prevent WM_PAINTs from being dispatched)
                      (may need reworking of Get/PeekMessage instead)
                      ScrollWindow changes
                      Removed frame drawing 'bugfix'.
	- KERNEL32:   Check for null pointers in lstrcmpA

 2000-01-15: Christoph Bratschi <cbratschi@datacomm.ch>
	- USER32/NEW: cache menu and caption drawing
		      changed minimize button position
		      don't redraw system menu icon in menu.cpp
		      hilighted menubar items don't have an edge in Win9x
		      don't open system menu on mouseover if menubar is used and vice versa
		      show sysmenu on WM_NCRBUTTONUP with HTCAPTION set (todo: position)
		      use WIN32_STDCLASS2 for windows with CS_SAVEBITS class style

 2000-01-14: Christoph Bratschi <cbratschi@datacomm.ch>
	- USER32/NEW: added caption clipping for faster window text updates

 2000-01-14: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32\NEW: Fixed min/max bug for mdi child windows
                      Fixed DrawMenuBar (invalidate frame rectangle in 
                      FrameUpdateClient if client rectangle wasn't changed)
                      Fixed bugs in MsgFormatFrame & SendNCCalcSize
                      Fixed WM_WINDOWPOSCHANGED translation for frame window (not done yet)
                      (Winamp works now)
                      Removed code that's no longer used (subclassed OS/2 frame
                      controls & OS/2 scrollbar functions etc)

 2000-01-13: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32\NEW: WM_ACTIVATEAPP should be sent when another process' window
                      is activated or deactivated
                      Send correct thread id for non-Odin windows in WM_ACTIVATEAPP
                      Set window handle of non-Odin window to window desktop in WM_ACTIVATE
                      Return window desktop handle for window handle returned by 
                      SetActiveWindow if window is non-Odin.
                      Fixed activation of windows. (send WM_ACTIVATE when receiving
                      a WM_WINDOWPOSCHANGED message in pmframe.cpp)
                      Fixed DrawFrame; bottom & right frame borders now drawn correctly
                      Fixed scrollbar positioning (style.exe)
                      Fixed CS_OWNDC for GetDCEx (DCX_WINDOW); don't use a window
                      DC to save/restore a window's own dc.
                      Fixed client rectangle problems. Client rectangles
                      are always in frame coordinates; window rectangles in 
                      screen coordinates. Whenever necessary (i.e WM_MOVE) 
                      client coordinates are converted to coordinates relative
                      to it's parent client window.
                      Changed WM_MOVE -> client coordinates relative to parent origin 
                      if child; otherwise relative to screen origin. (needs testing)
                      (WM_NCCALCSIZE needs to be done as well)
	- COMCTL32:   Version resource version nrs changed (based on NT 4 SP3)
	- KERNEL32:   Added DisableLogging & EnableLogging functions to
                      disable logging in parts of code. Logging will only be
                      done if the logcount is bigger than 0.
<<<<<<< ChangeLog
>>>>>>> 1.646

=======
>>>>>>> 1.648

 2000-01-12: Christoph Bratschi <cbratschi@datacomm.ch>
	- USER32/NEW: fixed WM_CALCVALIDRECTS
		      activated WM_NCPAINT clipping
		      added improved frame redraw mechanism

 2000-01-12: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32\NEW: Changed client rectangle positioning (not done by PM frame
                      handler anymore) -> fixes problems with Shell About dialog
                      and jumping controls when resizing (Winhlp32)
                      Fixed menu tracking for different submenus
                      Fixed delayed repaints of invalidated menu rectangles
                      Ported Wine messagebox code. (for GUI consistency)
                      Fixed bugs in ShowScrollBar. (vert. scrollbar wasn't enabled
                      in notepad)
                      Fixed 'frame' control updates (resizing client window in
                      SetWindowPos for SWP_FRAMECHANGED)
                      
 2000-01-11: Jens Wiessner <wiessnej@rfi.de>
	- TWAIN_32: Bugfix (removed test code)

 2000-01-11: Christoph Bratschi <cbratschi@datacomm.ch>
	- USER32/NEW: fixed AdjustWindowRectEx

 2000-01-11: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32\NEW: Put nonclient code in win32wbasenonclient.cpp
                      Removed hardcoded dependancy on shell32; load it on-demand
                      Fixed LoadBitmap (OBM_RADIOCHECK was missing from system bitmap list)
                      Fixed wrong return value for OSLibWinGetMsg
                      Workaround for bug in GDI32 FillRect (menu items painted
                      black instead of gray) (menu.cpp, MENU_DrawMenuItem)
                      Applied patch to Wine menu code for RealPlayer
                      Fixed default return value of DefWndProc (0)
                      Fixed SetMenu (menus should be set when a window is no child)
                      Call correct SetMenu function from MsgCreate Win32BaseWindow method
                      Use WIN32_INNERFRAME frame class for top level windows again.
                      (VPBuddy repaint problems were solved by using this class)

 2000-01-10: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32: Fixed message translation for WM_TIMER with no window handle or timer proc
                  Bugfix for OSLibWinGetMsg & OSLibWinPeekMsg (wrong return value)
	- WINMM:  Fixed wrong error code for waveOutOpen & waveOutGetDevCaps when 
                  there's no audio device
	- USER32\NEW: Fixed message translation for WM_TIMER with no window handle or timer proc
                  Changed WM_NCHITTEST behaviour. Now sent during WM_MOUSEMOVE
                  or button down/up message translation.
                  Fixed LoadBitmap (only load from user32 if it's a system bitmap)
                  Added WM_NCACTIVATE message generation
                  Bugfix for OSLibWinGetMsg & OSLibWinPeekMsg (wrong return value)
                  Changed GetSystemMenu; added method to Win32BaseWindow class
                  (destroy old menu if present and switch back to default system
                   menu if bRevert = TRUE; needs changes in non-client code)

 2000-01-10: Christoph Bratschi <cbratschi@datacomm.ch>
	- USER32/NEW: activated menu code

 2000-01-09: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32: Added border size for top-level windows in OSLibWinConvertStyle 
                  (borders are not drawn correctly)
                  Fixed bug in pmframe WM_WINDOWPOSCHANGED handler (don't update
                  client/window rectangle when size nor position have changed)
                  Fixed out of sync rectWindow. (children don't get notified of
                  parent position change -> rectWindow (in screen coord.) not updated)
                  Fixed LoadBitmap for system bitmaps
                  Fixes for win32 titlebar + added win32 system menu
                  System menu commands now work
                  Fixed repaint problem for win32 titlebar
		  Added Christoph's gradient filled title bars code
                  For (experimental) win32-like windows add this to odin.ini:
			[CUSTOMIZATION]
			OS2Look=0

			[COLORS]
			UseWinColors=1

 2000-01-09: David Raison <djr@lemur.co.uk>
        - OLEAUT32: Typelib - Updated TKIND_ALIAS handling.

 2000-01-09: Christoph Bratschi <cbratschi@datacomm.ch>
	- USER32/NEW: implemented scrollbar nc handling
		      windows without menus work now fine
		      implemented gradient filled title bars

 2000-01-08: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32: ModifyMenuA bugfix (changing menu ids didn't work)
                  OSLibGetMsg bugfix + WM_QUIT translation fix
                  OSLibGetMenuItemRect fix (y coordinate conversion)
                  Changed WM_NCHITTEST behaviour. Now sent during WM_MOUSEMOVE
                  or button down/up message translation.
	- OLE32/OLEAUT32/OLESVR32/OLEDLG/OLECLI32: 
                  Added Wine-like license that supercedes the main Odin license
	- CRTDLL: Fixed many register based floating point exports (CRTDLL__CIcos,
                  CRTDLL__CIatan etc etc)

 2000-01-08: Jens Wiessner <wiessnej@rfi.de>
	- CRTDLL: Compile fix

 2000-01-08: Patrick Haller <phaller@gmx.net>
	- SHELL32:	Update: to WINE level 2000/01/08
	- KERNEL32:	Add:	stub for GetDiskFreeSpaceExAW

 2000-01-06: Christoph Bratschi <cbratschi@datacomm.ch>
	- GDI32: added PatBlt support for negative width/height

 2000-01-06: Sander van Leeuwen <sandervl@xs4all.nl>
	- ADVAPI32: Implemented StartServiceCtrlDispatcherA/W
                    Faked RegisterServiceCtrlHandlerA/W (TODO)
                    Partly implemented SetServiceBits/SetServiceStatus
                    Improved QueryServiceStatus
                    Call RtlCreateAcl in InitializeAcl
	- LZ32: Create correct library
	- CRTDLL: Fixed CRTDLL__wcsnicmp (use Wine version)
	- VERSION: Fixed VerQueryValue32A and merged with latest Wine sources
                   (991212) (-> fixes errors in RealPlayer)
	- USER32: GetMenuStringA fix (return length of string if string pointer
                  or size parameter == 0)

 2000-01-05: Jens Wiessner <wiessnej@rfi.de>
	- TWAIN_32: Update

 2000-01-05: Christoph Bratschi <cbratschi@datacomm.ch>
	- USER32/NEW: single window works now

 2000-01-05: Sander van Leeuwen <sandervl@xs4all.nl>
	- KERNEL32/NTDLL: Partially implemented NtOpenThreadToken
                          (should be changed)
                          MS Office 2000 install (first part) almost working.
                          (installs windows installer as system service)
	- OLEAUT32: Typelib bugfix for MS Office 2k install
	- odin_ini.txt: Added information about CODEPAGES & TWAIN section

 2000-01-05: David Raison <djr@lemur.co.uk>
        - OLEAUT32: LHashValOfNameSys(A)

 2000-01-04: Jens Wiessner <wiessnej@rfi.de>
	- TWAIN_32: Created twain dll for usage with CFM Twain for OS/2.

 2000-01-04: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32: InsertMenu bugfix (RealPlayer calls InsertMenu with flag 0 & pos -1)
                  Delete old region in SetWindowRegion

 2000-01-03: Przemyslaw Dobrowolski <dobrawka@asua.org.pl>
	- KERNEL32: Named pipe updates & bugfixes

 2000-01-03: Jens Wiessner <wiessnej@rfi.de>
	- LZ32/TAPI32: Updated def files to match NT 4 SP6
	- MSVCRT: Updated def files + MSVCRT40 version info
	- WINMM: Added Wine's MCI dlls (not compiled as this requires
                 a working MCI subsystem in winmm and a redesign of
                 wave & midi)

 2000-01-03: Sander van Leeuwen <sandervl@xs4all.nl>
	- LZ32: Cleaned up .def file (don't import directly) & removed
                debugtools.h
	- USER32: Fixed PostThreadMessage + bugs in GetMessage
	- KERNEL32: Set hmq & hab THDB values for newly created
                    threads (hmq not correct now)

 2000-01-02: Przemyslaw Dobrowolski <dobrawka@asua.org.pl>
	- KERNEL32: Started implementing named pipe apis

 2000-01-02: David Raison <djr@lemur.co.uk>
        - OLEAUT32: Typelib fixes - Custom Data & Default values.
                    Added private logging to tlib_n.log when reading a TLIB.
                    (Should clarify what is being read & why)
                    Now supports embedded named TLIBS in the format
                    <path>\<libname>\<id> (required for VB6, etc.)
                    Preparatory work to reduce dependance on 
                    current file position to enable delaying parsing 
                    data until it is requested by user.

 2000-01-02: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32: Implemented Set/GetWindowRgn (not activated)
	- KERNEL32: Fixed Odin zombie processes when there's a trap inside
                    vfprintf during logging.
                    Cleaned up file io procedures in oslibdos.cpp

 2000-01-01: Sander van Leeuwen <sandervl@xs4all.nl>
	- USER32: Workaround for crash in Lotus Notes when switching to a new
                  view (PM sends WM_WINDOWPOSCHANGED msg after DestroyWindow
                  has been called for a window -> don't dispatch this msg)

