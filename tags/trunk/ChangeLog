 /* $Id: ChangeLog,v 1.1015 2000-06-29 19:42:11 sandervl Exp $ */

 2000-06-29: Sander van Leeuwen <sandervl@xs4all.nl>
    - INCLUDE\WIN\commctrl.h: 
                   Put undocumented parts in #ifdef COMCTL32UNDOC statement
    - INCLUDE\makefiles
                   Added -DCOMCTL32UNDOC to Odin compile flags
    - USER32:      Added HCBT_ACTIVATE hook call to SetActiveWindow
                   Send WM_ACTIVATE from WM_WINDOWPOSCHANGED if SWP_ACTIVATE
                   flag set -> fixes activation of odin windows
                   Removed forwarding of messages to PM frame window handler.

 2000-06-28: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32:    Cleaned up resource handling (findResourceA/W); much
                   more efficient now (searching for different languages)
                   Sets proper error code when failing to find type or name
                   Search for language in following order:
                   - specified language (user default if LANG_GETFIRST)
                   - primary specified language with default sublanguage
                   - language neutral 
                   - first available language
                   Changed return type of HMDeviceFileClass file locking
                   methods (DWORD -> BOOL; not a bugfix)

 2000-06-28: Michal Necasek <mike@mendelu.cz>
    - USER32:      BeginDeferWindowPos accepts count 0 as valid parameter
                   (verified in NT; negative count is illegal)

 2000-06-27: Patrick Haller <phaller@gmx.net>
    - KERNEL32:    Added CreatePipe() call. Note: Anonymous and named
                   pipes do NOT comply with HandleManager right now!

 2000-06-27: Michal Necasek <michalnec@volny.cz>
    - DINPUT:      Fixed some key values, MS uses mostly raw scan
                   codes but not always, why am I not surprised?

 2000-06-26: Sander van Leeuwen <sandervl@xs4all.nl>
    - GDI32:       Fixed inverse video in RealPlayer 7 with SDD video drivers
    - USER32:      Fixed bug in InvalidateRect/Rgn, don't include children
                   in WinInvalidateRect/Region call -> fixes painting of
                   background bitmap in XWing vs Tie Fighter install app.
                   WinInvalidateRegion with fIncludeChildren=0 invalidates both
                   the parent and child windows (for !WS_CLIPCHILDREN window)
                   fIncludeChildren=1 -> invalidates only child (in xwing case
                   as it overlaps the invalid region completely; though parent
                   window doesn't have WS_CLIPCHILDREN style)
    - KERNEL32:    Added check for crossing limit of relocation section when
                   applying fixups. (fixes crash in IBM VisualAge Java setup)

 2000-06-25: Michal Necasek <mike@mendelu.cz>
    - KERNEL32:    When creating files and mode is readonly, change to
                   read/write (or else DosOpen fails)
                   GetFileTime failed in OpenFile because handle wasn't
                   saved yet

 2000-06-23: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32:    Changed version; Odin presents itself as Windows NT 4 Service Pack 6
                   Return build nr in high word in GetVersion
                   Minor fixes in GetSystemInfo (processor level & revision)
                   FindResource bugfix for resource types starting with '#'
                   (i.e. "#102" really means numeric id 102)

 2000-06-22: Michal Necasek <mike@mendelu.cz>
    - KERNEL32:    Added language support for Czech Republic
    - USER32:      wsprintf bugfix for %#04x (didn't add leading 0('s) if required)

 2000-06-22: Christoph Bratschi <cbratschi@datacomm.ch>
    - COMCTL32:    fixed ANIMATE_ThreadFunc's calling convention

 2000-06-21: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:      Owner bugfix (WS_CHILD window has no owner)
                   Replaced calls to PM frame window handler (i.e. WM_FOCUSCHANGE)
                   Activated menu keyboard accelerators
    - KERNEL32:    Setup environment similar to NT. I.e.:
                   CPU=i386
                   HOMEDRIVE=<Odin drive>
                   HOMEPATH=\
                   NUMBER_OF_PROCESSORS=2
                   OS=Windows_NT
                   PATHEXT=.COM;.EXE;.BAT;.CMD
                   PROCESSOR_ARCHITECTURE=x86
                   PROCESSOR_IDENTIFIER=x86 Family 6 Model 6 Stepping 5, GenuineIntel
                   PROCESSOR_LEVEL=6
                   PROCESSOR_REVISION=0605
                   SystemDrive=<Odin drive>
                   SystemRoot=<Odin Windows dir>
                   windir=<Odin Windows dir>
                   TODO: Some environment variables still missing (see kernel32\initsystem.cpp)

 2000-06-21: Patrick Haller <phaller@gmx.net>
    - MSVCRT:      - Added stub for __CxxLongjmpUnwind (NETSCAPE 4.7)
    - CRTDLL:      - CRTDLL is in some serious troble:
                     1. CRTDLL__close() -> _close()
                        CRTDLL__openU() -> CreateFileA()
                        this combination is incompatible !
                     2. calls like _close() go into the OS/2 kernel somewhere
                        without proper FS: protection -> CRASH.
                     CRTDLL__close() is fixed (CloseHandle()) now.

 2000-06-18: Przemyslaw Dobrowolski <dobrawka@asua.org.pl>
    - KERNEL32:    Added language support for Poland

 2000-06-18 Patrick Haller <phaller@gmx.net>
    - KERNEL32:    - fixed potential memory leak in GetLocaleInfoA
                   - improved GetNumberFormatA

 2000-06-17: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32:    Bugfix in resource handling (due to yesterday's change)
                   DuplicateHandle fix
    - USER32:      Region fixes (RedrawWindow)
                   Get/SetWindowRgn fixes
    - INCLUDE\OS2WRAP.H:
                   Added missing wrappers for GpiCreatePolygonRegion,
                   GpiCreateEllipticRegion & GpiCreateRoundRectRegion

 2000-06-16: Sander van Leeuwen <sandervl@xs4all.nl>
    - GDI32:       Put back region 'bugfix' as it's completely wrong and breaks
                   RealPlayer 7.
    - KERNEL32:    FindResource bugfix for resource names starting with '#'
                   (i.e. "#102" really means numeric id 102)

 2000-06-14: Patrick Haller <phaller@gmx.net>
    - KERNEL32:     - fix in HandleManager::DuplicateHandler to call
                      OSLibDosDupHandle() instead of CreateFile
                    - fix oslibdos.h FILE_ SetFilePointer constants
                      were shifted by 1
                    - fix for signed negative 32-bit seek from llseek()
                      forwarded to the 64-bit OS/2 DosSetFilePtrL()
                      Note: need to check file locking APIs !
                    - fix GPI32 region: clientHeight, clientWidth:
                      hwnd == 0 == HWND_DESKTOP seems to be valid !

 2000-06-14: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:       Rewrote ExcludeUpdateRgn & GetUpdateRgn
                    Check if update rectangle is emtpy in PM WM_PAINT msg;
                    ignore it when that's the case
                    -> fixes excessive redrawing in Lotus Notes
    - GDI32:        Put back region apis
                    Rewrote region functions
                    DIB section reversal bugs fixed (as seen in Starcraft install)

 2000-06-14: Patrick Haller <phaller@gmx.net>
    - KERNEL32:     Altered calling of dllEntryPoint() depending on
                    static or dynamic loading if library according
                    to the Win32 documentation. (StarCraft)

 2000-06-13: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:       Check if class already exists in RegisterClass(Ex)A/W
                    and return 0 (ERROR_CLASS_ALREADY_EXISTS) if true

 2000-06-12: Patrick Haller <phaller@gmx.net>
    - LZ32:         Updated to current WINE level (minor changes)

 2000-06-11: Patrick Haller <phaller@gmx.net>
    - KERNEL32:     Moved GetNumberFormat to different source file and enhanced
                    it a little (WinRAR shows file sizes)
                    Creating an existing directory does not return an error ?!
                    Updated GetStringTypeA/W and GetStringTypeExA/W

    - SHLWAPI:      Added a whole lot of missing functions, forwarders, stubs
                    Only 50 more to go for IE4 ...

 2000-06-09: Patrick Haller <phaller@gmx.net>
    - COMCTL32:     Added some missing stubs (.9 .10 .389 .390)
    - SHLWAPI:      Added numerous missing functions, some stubs
                    (.1 .2 .3 .4 .5 .6 .7 .8 .9 .10 .11 .12 .13 .14 .15 .16
                     .23 .28 .37 .38 .40 .43 .53 .56 .59 .60 .74 .83 .94 .95
                     .102 .116 .117 .158 .197 .240)

 2000-06-08: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32:     Fixed incorrect last error for OpenFile & LoadLibrary(Ex)
                    Added null pointer check to RegQueryValueW and fixed
                    memory leak.
    - USER32:       Ignore weird WM_ADJUSTWINDOWPOS messages (why are they sent?)
                    -> fixes combo box
                    Fixed GetUpdateRect
                    RedrawWindow changes; SetWindowPos fix (client invalidation)
                    Call MsgNCPaint in RedrawWindow (WM_NCPAINT is not posted
                    if update region doesn't include (part of) the nonclient area.
                    -> fixes RealPlayer 7 titlebar, borders & menu
                    GetTopWindow fix. (should work properly now)

 2000-08-03: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - tools/install:Added a stram 'close' on the changelog.
                    (4OS2 can't copy files which are opened for write(?).
                    The changelog has to be closed after copying it into
                    the odininst.wis file.)
    - tools/DailyBuild:
                    Creates .WPI releases too.
                    (odin32pack.cmd and odin32ftp2.cmd)
                    WarpIn is added to the build environment variables
                    (odin32env.cmd).
                    WarpIn is added to the build environment variables
                    (odin32env.cmd).

 2000-06-07: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:       Fixed wrong dispatch of WM_NCHITTEST
                    Fixed DC leak in EndPaint (reset hps type to TYPE_1)
                    -> resulted in out of memory and very slow PM operations
                    -> ICQ 2000a install now finishes (used to run out of mem)
                    Rewrote window management; now one PM window (non-frame)
                    is created for each win32 window (used to be a frame/client
                    pair)
                    -> speeds up drawing & fixes some repaint problems
                    Window coordinates (internally stored) are now relative
                    to window parent (or screen coord. if no parent); client
                    coordinates relative to the frame window
                    GetParent now returns owner if toplevel window
                    SetParent hides and shows window when changing parent
                    Added support for DCX_USESTYLE, DCX_CLIPSIBLINGS, DCX_CLIPCHILDREN
                    and DCX_PARENTCLIP in GetDCEx
                    Rewrote Set/GetWindowPlacement + SetInternalWindowPos (Wine port)
                    Manual minimize, maximize & restore in ShowWindow + fixes
                    TODO: Repaint problems, move child windows when client position/size
                          changes
                    SetParent/GetParent fixes for desktop parent.
    - SHELL32:      Disabled system tray window for now. (appears in top/right
                    of the desktop otherwise)

 2000-06-03: Jeroen van den Horn <J.vandenHorn@fibre.a2000.nl>
    - WINMM:        Don't start playback when WaveOutRestart is called
                    before any buffers have been added.
                    Clear WHDR_INQUEUE bit for buffers returned in WaveOutReset

 2000-06-03: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - Win32k/REXX:  Rewrote the REXX stub program in assembly.
                    (exe size: 688 bytes) Might be able to embedd it in
                    win32k.sys... (not priority)

 2000-06-02: Jeroen van den Horn <J.vandenHorn@fibre.a2000.nl>
    - SHELL32:      Systray class registered with wrong name

 2000-06-01: Sander van Leeuwen <sandervl@xs4all.nl>
    - GDI32/USER32: Moved GetClipRgn & GetClipBox into user32 (dc.cpp)
    - GDI32:        Added more logging
    - KERNEL32:     Rewrote CompareFileTime, DeleteFileA
                    Put file io apis in separate handlemanager object class
                    Rewrote most file io apis; includes support for 64 bits file
                    pointer/size:
                    - CreateFile/OpenFile/DuplicateHandle/CloseHandle
                    - ReadFile(Ex)/WriteFileEx/GetFileType/GetFileInformationByHandle
                    - SetEndOfFile/SetFileTime/GetFileTime/GetFileSize
                    - SetFilePointer/LockFile(Ex)/UnlockFile(Ex)/FlushFileBuffers
                    Fixed some OpenFile bugs. Put Read/WriteFileEx into file
                    io class. Fixed LockFileEx/UnlockFileEx
                    New file apis use OS/2 apis now; overlapped IO not yet
                    supported.
    - SHELL32:      Added ISF_MyComputer_fnParseDisplayName from latest Wine
                    Fixes open file dialog
