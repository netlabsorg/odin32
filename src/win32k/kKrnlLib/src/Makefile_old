# $Id: Makefile_old,v 1.1 2002-03-10 02:45:48 bird Exp $

#
# kKrnlLibR3.lib makefile.
#
# Copyright 1998-2001 knut st. osmundsen (knut.stange.osmundsen@mynd.no)
#
# Project Odin Software License can be found in LICENSE.TXT
#


#
# Include path definitions, common stuff and our own tools.
#
CDEFINESEXTRA   = -DKKRNLLIB
LIBTARGET = 1
PUBLICLIB = 1
EXETARGET = 1
!include ../makefile.inc
OBJDIR = $(KKRNLLIBR3)
!include ../../../../makefile.inc


#
# Overrides
#
CINCLUDES = -I$(WIN32KINCLUDE) $(CINCLUDES)
ASFLAGS = -i:$(WIN32KINCLUDE) $(ASFLAGS)
!if "$(VAC3)" == "1" | "$(VAC36)" == "1"
CFLAGS     = $(CFLAGS:-Gm+=)   -Rn
CXXFLAGS   = $(CXXFLAGS:-Gm+=) -Rn
!endif


#
# Target name
#
TARGET = kKrnlLibR3


#
# Object libraries
#
OBJS=\
$(OBJDIR)\asmutils.obj \
$(OBJDIR)\kAssert.obj \
$(OBJDIR)\kAVLPV.obj \
$(OBJDIR)\kAVLStr.obj \
$(OBJDIR)\kAVLStrI.obj \
$(OBJDIR)\kAVLULM.obj \
$(OBJDIR)\kLog.obj \
$(OBJDIR)\kLoga.obj \
$(OBJDIR)\kLogAVLStr.obj \
$(OBJDIR)\kLogAVLUL.obj \
$(OBJDIR)\malloc.obj \
$(OBJDIR)\smalloc.obj \
$(OBJDIR)\rmalloc.obj \
$(OBJDIR)\new.obj \
$(OBJDIR)\newdbg.obj \
$(OBJDIR)\stricmp.obj \
$(OBJDIR)\vsprintf.obj \
$(OBJDIR)\vprintf.obj \
$(OBJDIR)\abort.obj \
$(OBJDIR)\fltused.obj


#
# Includes the common rules.
#
!include $(ODIN32_POST_INC)

!if "$(VAC3)" == "1" | "$(VAC36)" == "1"
$(OBJDIR)\new.obj new.obj: new.cpp
    $(CMDQD_SUB) $(CXX) $(CXXFLAGS) -Tm- $(CINCLUDES) $(CDEFINES_WIN32APP) -Fo$(OBJDIR)\$(@B).obj -c new.cpp

$(OBJDIR)\newdbg.obj newdbg.obj: newdbg.cpp
    $(CMDQD_SUB) $(CXX) $(CXXFLAGS) -Tm+ $(CINCLUDES) $(CDEFINES_WIN32APP) -Fo$(OBJDIR)\$(@B).obj -c newdbg.cpp

!endif
