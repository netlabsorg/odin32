/* $Id: changelog,v 1.1469 2001-06-02 07:25:28 sandervl Exp $ */

 2001-06-01: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o Send WM_HELP if F1 pressed & no menu active
                o Disabled system hooks (only work in one process)
    - KERNEL32: o Improved ordinal lookup a bit. (usually 4 times faster, but
                  barely noticable with 'real' applications)
    - OLE32:    o Added OleLoadPictureEx stub
    - GDI32:    o GetDIBits fix for querying the bitmap information
                  WGSS returns 0, but we should return the nr of scan lines requested
                o GetDIBits fix for memory dcs. WGSS messes things up if
                  it's a memory DC.
                  TODO: fix in WGSS
                  (fixes lower right button in AIM's logon window when typing
                   in new name)
                o ExtTextOutA/W fix for filling rectangle with background color
                  only. This doesn't seem to work (anymore) with GpiCharStringPosAt.
                  (fixes border between menu & button bar in Odin MFC app &
                   Acrobat Reader 4.05)
                o StretchDIBits fix for RGB555 bitmaps 
                  (fixes pictures in pdf files shown by Acrobat Reader 4.05)
    - SHLWAPI:  o Added PathGetCharTypeA/W from Wine

 2001-06-01: Patrick Haller <patrick.haller@innotek.de>
    - KERNEL32: o benchmarked new experimental loader and reverted to
                  old but slightly optimized loader (processExport usually
                  outweighs processImport, so lookup is less valuable than
                  add to export list)
    - SHELL32:  o SIC_Initialize took extremely long to pre-initialize 
                  its icon cache. Revert to on-demand loading of the icons,
                  speeds up loading of SHELL32 (therefore most apps) 
                  by several seconds.

 2001-05-31: Sander van Leeuwen <sandervl@xs4all.nl>
    - OLEAUT32: o Fixed ITypeInfoImpl_Invoke

 2001-05-30: Patrick Haller <patrick.haller@innotek.de>
    - KERNEL32: o further performance improvement of hashtables
                o fixes for loader improvements (PE, LX)
                o Todo: measuring new code, reducing memory requirements                

 2001-05-30: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o RedrawWindow: don't clear erase background flag if the 
                  window is already (partly) invalidated.
                  (fixes redrawing of dialogs controls in mIRC startup dialog 
                   window (when switching option windows))
    - KERNEL32: o Put back old lookup code. 
                  New files renamed to winimagepeldr_new.cpp/h
                  (Odin test app crashes; looks like MFC42 ordinal lookup
                   fails somewhere)
    - OLEAUT32: o Added RegisterTypeLib (ported recent Wine patch) &
                  UnRegisterTypeLib
                o Added ITypeInfoImpl_Invoke (ported Francois Jacques'
                  (refused) patch and rewrote it to get rid of stack
                  layout dependency.
                o VT_HRESULT -> VT_INT conversion added to Coerce
                  (all needed for Quicken Deluxe 2001; still crashes, but
                   gets passed data loading)
    - OLE32:    o OleRun: check pointer with IsValidInterface
                  (fixes crash in Quicken after data loading)

 2001-05-30: Patrick Haller <patrick.haller@innotek.de>
    - KERNEL32: o replaced linear lists in PE loader with faster hashtables
                  (ccollection.cpp, experimental)
                  ToDo: measure any difference, revert eventualls

 2001-05-29: Sander van Leeuwen <sandervl@xs4all.nl>
    - GDI32:    o Set/GetDIBColorTable fixes for DIB sections with bpp > 8
                o Don't sync DIB section in SelectPalette if bForceBackground
                  is -1. (hack for bitmap buttons in Beyond Compare)
    - DCIMAN32: o Updated & return proper error codes

 2001-05-28: Patrick Haller <patrick.haller@innotek.de>
    - GDI32:    o Split GDI32.CPP into ICM.CPP and GDI32.CPP
    		o CreateDC() accepts "display" instead of "DISPLAY"
                  (fixes font-not-found problem in ZD Bench 99)
    - KERNEL32: o mmap.cpp: slightly accelerated ::findMapByView()
    		o directory.cpp: don't trap in CreateDirectory(NULL, NULL)                
    - DDRAW:    o implemented DirectDrawCreateClipper()
    - WOW32:	o created initial (fake) version of WOW32.DLL
    		  (SBLiveXP accesses this directly)

 2001-05-27: Sander van Leeuwen <sandervl@xs4all.nl>
    - COMCTL32: o Listview: merged old LISTVIEW_EnsureVisible
                  (gets rid of excessive repaints)
    - USER32:   o Replaced TabbedTextOutA/W & GetTabbedTextExtentA/W with
                  Wine version. GPI doesn't support strings > 512 characters.
    - GDI32:    o Commented out InternalTabbedTextOutA/W & InternalGetTabbedTextExtentA/W

 2001-05-26: Sander van Leeuwen <sandervl@xs4all.nl>
    - COMCTL32: o Datetime control resync with Wine (get/setrange added)

 2001-05-25: Sander van Leeuwen <sandervl@xs4all.nl>
    - Odin.ini: o Removed MS Shell Dlg font mapping
    - GDI32:    o Synchronize DIB Section after SelectPalette call (if selected in DC)
                  (fixes wrong colors for some bitmaps)
                o Update bitmap and synchronize DIB Section in SetDIBits
                o Update color table during DIB sync too
    - USER32:   o Dialog control x & y coordinates in dialog template are signed 
                  words. (fixes dialog controls with negative offset)
                o Rewrote Post(Thread)/SendMessage; filtering of posted/sent
                  messages (by app) is now possible with Peek/GetMessage.
                o PeekMessage fix; got rid of double removal for untranslated 
                  messages

 2001-05-24: Sander van Leeuwen <sandervl@xs4all.nl>
    - GDI32:    o Commented out recent changes (color conversion) in
                  SetDIBitsToDevice. Breaks startup bitmap of Acrobat Reader 4
                o GetTextExtentPointA; call WGSS instead.
                  Better result (strings not clipped).
    - KERNEL32: o OpenFile fix for OF_REOPEN flag (crashes when looking up
                  handle)
    - IPHLPAPI  o Added stub dll

 2001-05-23: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o RedrawWindow with desktop window handle no longer returns
                  an error.
                  (fixes RealPlayer Auto Size window)
    - Odin.ini  o Added font mapping for MS Shell Dlg to WarpSans
                  (gets rid of ugly fonts (in dialogs) which also have the wrong
                   size (text clipping))
    - KERNEL32: o CreateFile for partitions; handle lookup fails if 
                  OS/2 handle is set to -1 (happens if disk not inserted)
                  -> set to 0 instead

 2001-05-22: Sander van Leeuwen <sandervl@xs4all.nl>
    - COMCTL32: o Partial merge of listview control with latest Wine
                o Listview: Send WM_MEASUREITEM for controls with
                  LVS_OWNERDRAWFIXED style.
                  (TODO: sets size for all items only)
                  (fixes wrong item size for VirtualPC main window)
    - USER32:   o Fixed minimizing & restoring of top-level windows
    - KERNEL32: o Check name before adding dependency for module in
                  order to avoid circular dependencies (WNETAP32 (== NETAPI32)
                  imports from NETAPI32)
                  (fixes crash at exit in VirtualPC)

 2001-05-20: Sander van Leeuwen <sandervl@xs4all.nl>
    - GDI32:    o Fixed LPtoDP/DPtoLP again.
    - USER32:   o Paint menu item first before destroying it
                  (prevents menu control from painting selected item on
                   desktop)
                o Don't show or hide scrollbar in SetScrollInfo if
                  scroll parameters didn't change.
                  (fixes loop in VirtualPC settings dialog)

 2001-05-20: Dietrich Teickner <Dietrich_Teickner@t-online.de>
    - KERNEL32: o LOCALE_IFIRSTDAYOFWEEK fixes (Get/SetLocaleInfo)

 2001-05-19: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - win32k:   o Added improvements from Rafal, better validation of the
                  paths which are found. Might cause some warnings for
                  some of you, but just read and ignore them.
                  Run configure.cmd (one of them)!

 2001-05-19: Sander van Leeuwen <sandervl@xs4all.nl>
    - GDI32:    o LPtoDP/DPtoLP: check input because GpiConvert doesn't like
                  illegal values (TODO: check what NT does)
                  (fixes huge buttons in VirtualPC dialog (font with wrong
                   height created))
    - INCLUDE\odinwrap.h:
                o ODINFUNCTIONNODBG & ODINPROCEDURENODBG should still save
                  and restore FS!!!
                  (FS corruption in release build; mainly affects wsock32)
    - WS2_32:   o Added more exports
    - KERNEL32: o Export TryEnterCriticalSection
                o InterlockedCompareExchange bugfix; should not always return
                  old destination; return whatever cmpxchg puts in eax
    - SHLWAPI:  o Export SHSetValueW
                o Ordinal export 342 is InterlockedCompareExchange implementation
                  Takes 3 parameters, not 4. (Wine bug)
                o Ordinal export 151 takes 3 parameters, not zero.
                o Implemented SHLWAPI_151 (case sensitive string compare
                  with length; ascii version of SHLWAPI_152)
                o Implemented SHLWAPI_153 (case insensitive string compare
                  with length (ascii))
                o Added SHLWAPI_154 (case insensitive string compare with
                  length (unicode))
    - USER32:   o Added TrackMouseEvent, GetGUIThreadInfo & SendInput stubs
    - ADVAPI32: o Added undocumented SystemFunctionXXX functions (stubs)
                o Set lasterror in EnumServicesStatusA/W stubs
    - GDI32:    o GetTextExtentPointA now handles strings larger than 512
                  characters.

 2001-05-19: Dietrich Teickner <Dietrich_Teickner@t-online.de>
    - KERNEL32: o LOCALE_IFIRSTDAYOFWEEK fix (GetLocaleInfo)

 2001-05-18: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: o Fixed FS corruption in LCMapStringA/W
                o ole2nls: resync with latest Wine sources

 2001-05-17: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o InvalidateRect & InvalidateRgn must call RedrawWindow
                  with RDW_ALLCHILDREN flag.
                  (RealPlayer 8 install dialog doesn't have WS_CLIPCHILDREN
                   style -> InvalidateRect overwrites child windows (buttons))

 2001-05-17: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o Destroy menu windows when they are no longer used.
                  (fixes activation problems with dialogs created after
                   selecting a menu item)
                  (TODO: sync with latest wine menu control sourcecode)
                o clientHeight bugfix (fixes crash in Solitaire)
                o Check if another app changed mouse cursor (Get/SetCursor)
                  (previously mouse cursor did not change back if another
                   app modified it)

 2001-05-16: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o WM_SETREDRAW fix; must call WinEnableWindowUpdate for
                  both client and frame window.
                  (winhlp32 buttons are now visible again)

 2001-05-15: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - Tools\bin:o Synced with other projects using the same tools.

 2001-05-15: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o BeginPaint must return logical points instead of device points.
                  (not the same if e.g. app changes page viewport)
                  (fixes scaling in Opera)
                o SetFocus fix; manual activation of windows; PM sometimes
                  changes the Z-order of the window being activated.
                  Also call WH_CBT hook handler (if present)
                  (fixes hotlist window in Opera)
    - KERNEL32: o OpenFile: check if filename ptr is NULL, return ERROR_INVALID_NAME
                  if true. (verified in NT4, SP6)

 2001-05-15: Dietrich Teickner <Dietrich_Teickner@t-online.de>
    - KERNEL32: o Added LOCALE_IFIRSTDAYOFWEEK case for GetLocaleInfoW
    - COMCTL32: o Commented out TRACE call in DATETIME_ParentNotify.
                  Wrong assumption about lParam as it's not always a pointer
                  (WM_CREATE WM_PARENTNOTIFY lParam == hwnd -> crash)

 2001-05-13: Dietrich Teickner <Dietrich_Teickner@t-online.de>
    - COMCTL32: o Fixed wrong return values for datetime control
                  (DTM_GETSYSTEMTIME & DTM_SETSYSTEMTIME)

 2001-05-11: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o Rewrote window handling. Back to using frame and client windows
                  for each win32 window.
                  (fixes visible region problems with e.g. Opera)
                  Frame windows never have the WS_CLIPCHILDREN style; this caused
                  the transparency problems reported earlier when using this method.
                  E.g.: Dialog parent, groupbox; invalidate part of groupbox ->
                        painting algorithm stops top-down search when it finds
                        a window with WS_CLIPCHILDREN style
                        -> result: dialog window won't update groupbox background
                                   as groupbox only draws the border
                o UpdateWindow: Must use frame window handle even though
                  UpdateWindow only updates the client area.
                  If the frame window has a valid update region and we call
                  WinUpdateWindow for the client window, then no WM_PAINT
                  messages will be sent.
                o Don't erase background in RedrawWindow (invalidate) when
                  RDW_ERASE flag not set.
                  (gets rid of excessive background redraws (flickering) for
                   progress windows in some installers)
                o Fixed ScrollWindow bug
                o WM_SHOWWINDOW sent twice
                o Mark window's visible region as changed when client receives
                  WM_SIZE (PM). BeginPaint sends a WM_ERASEBKGND when this
                  flag is set (regardless of erase flag set by RedrawWindow)
                o ScrollDC fix (window handle transation)
                o ScrollDC and ScrollWindowEx bugfix (setting update region)
                  (fixes scrolling in MS Word 97)
    - GDI32:    o SetDIBitsToDevice: RGB 555 is the default for 16 bits bitmaps
                  (fixes pictures in (some) documents for Word 97)
                  TODO: Probably need to check bitfields and convert for some
                        other blit functions

 2001-05-10: Shingo Tsuda <sofiya@din.or.jp>
    - GDI32:    o Rop conversion for DIB Section blits
                o Support for negative height (origin top left) in
                  SetDIBitsToDevice + StretchDIBits

 2001-05-10: Sander van Leeuwen <sandervl@xs4all.nl>
    - GDI32:    o includeBottomRightPoint bugfix; if left == right or top == bottom
                  then the rectangle isn't empty. (include/include input)
                  (fixes e.g. missing erase background when slowly moving window
                   over Odin window (full window dragging enabled))

 2001-05-09: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - src/ws2help, bin/debug, bin/release, src/win32k/list,
      src/win32k/debug:
                o Removed directories. These were either not needed
                  or unused. I did this now since I was going to
                  remove ws2help anyway and there by breaking your tree.
    - tools/bin/CVSRemoveDeletedDirs.cmd:
                o Rexx script which removes the above directories
                  from your local tree. Run this from the root of the tree.
                  To physically remove the directories you have to specify
                  REMOVE as argument (no dash or slash!).

 2001-05-08: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - src/makefile:
                o Ignore WS2HELP for the moment.
                  (Never add empty subdirs to /src without making
                   /src/makefile ignore it!)

 2001-05-07: Patrick Haller <patrick.haller@innotek.de>
    - WS2_32:   o created skeleton and added forwarders to WSOCK32
    - KERNEL32: o CreateProcess error handling corrected, if
    		  O32_CreateProcess fails with specific reason

 2001-05-04: Dietrich Teickner <Dietrich_Teickner@t-online.de>
    - SHELL32:  o Update for SHFileOperationA (FO_MOVE)

 2001-05-04: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   o FrameTrackFrame bugfix for moving child windows

 2000-05-03: Yuri Dario <mc6530@mclink.it>
    - USER32:   o SendNCCalcSize call bugfix (client rectangle parameter)
                o Fix for groupbox WM_SETFONT handler. Must erase top part
                  if font is changed.
    - OLEAUT32: o Fail for TLBMAGIC2 typelib type.

