 /* $Id: changelog,v 1.1140 2000-09-22 10:47:21 bird Exp $ */

 2000-09-22: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - Win32k/Pe2Lx:
               -Always apply all-in-one-object aligment fix. This will
                solve lots of problems. (Hopefully temporary; I will explore
                a VMAllocMem flag for VDMs which allows allocation of
                pagealigned objects in the tiled arenas. The flag works
                as expected but I get IPEs during process cleanup...)
               -Corrected bug in applyFixups. Fixups was not applied when
                the all-in-one-object aligment fix was applied.
               -The problem with the build 14053 (testcase) kernels is solved.
                ldrOpenPath have got an addition parameter. Symbols added
                to the SymDB.
               -Win32k.sys build now requires h2inc.exe is present in
                the tools directory of the base DDK.
    - KERNEL32: Changed Pe2Lx to use module address (address of the header
                object) as hinstance. Some programs depends on this.
    - opengl\glu\nurbs\internals: Turned off optimization. Internal
                compiler error in release mode compiling sorter.cpp.

 2000-09-21: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - INCLUDE\makefiles: Made cleanrule omittable by defining NOCLEAN.
    - Pe2Lx:    Corrected/Made cleanrule.
    - Win32k:   New Microsoft C fix. Invokes it with no environment. Thanks goes to
                Serge Sterck for this discovery. I hope it works out well.


 2000-09-20: Markus Montkowski <mmontkowski@gmx.de>
    - KERNEL32: Implemented COM-port APIs
                Enhanced handlemanager to support device and handle data (for COM ports)
                Added IOCTL to oslibdos
    - INCLUDE\handlemanager.h os2win.h win32type.h: added COM definitions

 2000-09-19: Michal Necasek <mike@mendelu.cz>
    - INCLUDE\makefiles: disable C++ exception handling code generation (FS:0 changes)

 2000-09-16: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: Fixed matchModName bugs. (compare name without extension)
    - WNASPI32: Restore win32 FS selector before calling post procedure

 2000-09-16: David Raison <djr@lemur.co.uk>
    - OLE32: Further updates from Wine
             IMessageFilter stubs.
    - OLEAUT32: Updates from Wine
             ITypeComp stubs.

 2000-09-16: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - Tools\dbginfo: Solved DosCall1.DLL problem. Successfully creates HLL
                HLL debuginfo from .SYM files and add it to LX files.

 2000-09-15: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - KERNEL32: Corrected logging for GetModuleFileNameA/W (a handle and
                a string pointer was mixed - which proved fatal with
                logging enabled).

 2000-09-15: David Raison <djr@lemur.co.uk>
    - OLE32: Updates from Wine

 2000-09-15: Sander van Leeuwen <sandervl@xs4all.nl>
    - WNASPI32: Open and initialize aspirout during dll load; doing this
                for *every* aspi command is very inefficient.
                Not possible to share aspirout now, but that could be fixed
                later on.
    - KERNEL32: Bug in recent exception handler changes; nested exception
                are allowed to be dispatched to Odin's handlers. (PE loader
                depends on it -> fixes crash in Lotus Notes)
                Export WriteLogNoEOL

 2000-09-14: Sander van Leeuwen <sandervl@xs4all.nl>
    - WNASPI32: Fixed uninitialized variables in aspirout class
                Fixed memory leaks (aspi object not deleted when something goes wrong)
    - KERNEL32: Implemented IOCTL_SCSI_GET_ADDRESS (not perfect; only works
                for cdrom/dvd drives and only the first one)

 2000-09-13: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: InitCommandLine corrupted the heap
                Created HandleManager class for physical disks
    - GDI32:    StretchDIBits: Open32 always returns height of bitmap (regardless of how many
                scanlines were copied); now corrected
    - WNASPI32: Fixed FS corruption

 2000-09-13: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - KERNEL32: Added method matchModName to Win32ImageBase.
                Used matchModName in LoadLibraryExA.
                Documented and enhanced GetModuleFileNameA/W.
    - Win32k:   Display build time and date on verbose init.
                Made sure build time and date is updated everytime
                it's relinked.

 2000-09-12: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: GetCommandLine changes broke LX executable support. Fixed now.

 2000-09-12: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - KERNEL32: Rewrote GetCommandLineA/W. Don't depend on Open32 any longer.
                The commandline strings are moved to global variables in
                wprocess.cpp.
                Added/extended some OSLib calls.

    - Wink32:   When invoking PE.EXE the first argument (Win32 exe name)
                should be in quotes.
                This is not yet corrected for the other invokers. (Scripts/Java).

 2000-09-09: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: Don't dispatch exceptions after application has called
                ExitProcess. (fixes endless loop of exception handler calls
                in RealPlayer 7)
                Create more registry keys during installation:
                HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Session Manager
                HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunOnce
                HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\App Paths\iexplore.exe
                GetFileAttributesA trashes the stack (EBX register corrupted after return)
                If CreateFile fails to duplicate the handle, then try DosDupHandle
                (DuplicateHandle for memory mapped files in IE5)
                Set dwCreation flag to OPEN_EXISTING for DuplicateHandle (memory mapped files)
    - PE:       Endless loop when it can't find executable with name in quotes

 2000-09-08: Michal Necasek <mike@mendelu.cz>
    - KERNEL32: Changes and fixes for exception handling (now dispatches
                exceptions to win32 apps)

 2000-09-08: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: Implemented EnumResourceLanguagesA/W
                Put back some code that was changed. (environ.cpp & heap.cpp)
    - GDI32:    Fixed FS bug in OSLibDeleteRegion
    - USER32:   Removed wrapper for GetWindow; not required

 2000-09-07: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - Win32k:   Added last FP14 kernel to Symbol database.
                Splitted extract.c from Probkrnl.c. Removed old debug
                code from Probkrnl.c (Probkrnl.exe) - use win32ktst.exe
                for Ring-3 testing now.
                Added filehandle fix for MSC60a compiler. (fix don't work!)

 2000-09-07: Patrick Haller <phaller@gmx.net>
    - KERNEL32: Fixed some FS: bugs in time.cpp, environ.cpp, heap.cpp
                Fixed language support from WINE sync
    - GDI32:    Fixed some FS: bug in DeleteObject(), DeleteDC()

 2000-09-07: Sander van Leeuwen <sandervl@xs4all.nl>
    - COMCTL32: TOOLBAR_SetBitmapSize & TOOLBAR_SetBitmapSize; do not return
                FALSE when called after buttons have been created.
                (failed assertions in MFC applications; this code is from
                 the latest Wine source tree)
    - SHELL32:  Merged more changes made by Christoph into new tree
    - KERNEL32: InitDirectories must be called before InitializeTIB or else
                a win.ini file is created in the root dir (InitializeTIB
                loads ntdll which depends on user32)
                (reported by Kai Sommerfeld)
    - USER32:   GetWindow was completely wrong. Didn't take Z-order into account.
                Fixes MFC applications (missing controls + redraw problems)

 2000-09-06: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - install:  Added Win32kCC.exe and kRx.EXE to the .wpi distributions.

 2000-09-05: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   WM_PARENTNOTIFY during WM_CREATE was sent to the wrong window
                WM_FOCUSCHANGE fix; set & kill focus were sent twice
                Added more logging.
                Activate window after resizing (WM_WINDOWPOSCHANGED in pmwindow.cpp)
    - KERNEL32: Workaround for RegSetValueA; a call to this api in Netscape
                fails with error 8 due to a 0 size of the key data
                HMOpenFile fix; pHMHandleData->dwCreation must be set
                to OPEN_EXISTING or else the memory map class will fail
                to duplicate the handle.

 2000-09-04: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: GetDiskFreeSpaceExA: added support for 64 bits disk size
                Rewrote GetDiskFreeSpace (no longer uses Open32)
    - USER32:   SetWindowLong GWL_WNDPROC changes/fixes
		Type of SetWindowLong determines new window proc type
                UNLESS the new window proc has already been registered
                (use the old type in that case) (VERIFIED in NT 4, SP6)
                Return original window procedure if types match (SetWindowLongX & proc type)
                otherwise window proc wrapper.
                Fixes wrong strings in Notes 5.0. (new string problems, but they
                are caused by something else)
    - COMCTL32: CreateUpDownControl was not exported correctly
                (reported by Reinhold Kopper)

 2000-09-04: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - Win32k:   Improved error reporting.
                Corrected fatal bug in the QueryOptionsStatus IOCtl,
                had forgotten three SSToDS()...

 2000-09-04: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - doc/readme.txt: Updated Win32k sections.
    - Win32k:   Fixed missing object in the 16-bit clib.lib which caused
                linking of win32k.sys to fail in last daily build.
                Support for comport 3 and 4.
    - Win32kCC: Updated dialog to show all information provided by the
                Win32k IOCtl interface.
    - Include/HandleManager.h:
                Added prototype for HMDeviceIoControl which Sander forgot.

 2000-09-03: Patrick Haller <phaller@gmx.net>
    - KERNEL32: NLS sync with WINE

 2000-09-03: Sander van Leeuwen <sandervl@xs4all.nl>
    - KERNEL32: More logging;
                DeviceIoControl didn't have handlemanager wrapper
    - GDI32:    Missing wrapper for WinDrawTabbedText caused FS corruption.
                PLEASE be more careful in the future!

 2000-09-02: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - Win32k:   Finally. I've merged the new changes into the main branch.
                The most important things are:
                    - More correct search order for DLLs. The differences are
                      now that _ALL_ DLLs are found using the Windows search
                      order, and that the LIBPATH are also searched (last).
                    - PE.EXE may be invoked by Win32k.sys.
                      Win32k.sys will now operate in three modes:
                        - Pe2Lx mode. Only the Pe2Lx method is used.
                        - Mixed Pe2Lx and Pe.exe mode. Pe.exe is invoked for
                          executables which Pe2Lx don't currently support.
                          (like WinWord, which BTW may trap you PC if invoked
                          in Pe2Lx mode.)
                          This is the default mode.
                        - Pe.exe mode. Pe.exe is allways used.
                      (see readme.txt, I'll update it to ASAP but not to night.
                       (I tired after working 36 hours on finishing this...)
                    - UNIX Shell Scripts are working (now).
                    - JAVA invokation. If you try to load a JAVA class the
                      it is executed using java.exe. (note that the class
                      name is case sensitive!)
                    - Pure REXX. This one is for Nenad. .RX and .REX are
                      loaded using a tiny REXX starter, kRX.exe (found in
                      System32 directory).
                    - Win32k Control Center, Win32kCC.EXE. Simple PM
                      program which allows you to change the Win32k.SYS
                      options while running. It does also show some status
                      information (will be extended).
                    - Support for FP14 in the Symbol database.
                      (use the 09th Aug. kernel please).

    - KERNEL32: Speeded up loading by using Win32k.sys IOCtl to get
                objecttable entries (OTE) for the Pe2Lx executable images,
                instead of using DosQuerySysState (which gets OTEs for all
                modules in the entrie system). (This is the reason for the
                win32k.lib file - it's made by the 'libs' rule from src.)

 2000-09-02: Sander van Leeuwen <sandervl@xs4all.nl>
    - USER32:   Rewrote IsZoomed
                Removed winzip invisible button fix; causes many repaint
                problems. Need to find the real cause.
    - DDRAW:    More debug logging; implemented ClipGetClipList
    - WINMM:    mixerGetID fix (for NULL hmixer)

 2000-09-01: knut st. osmundsen <knut.stange.osmundsen@mynd.no>
    - INCLUDE:  Shut up the OS/2 resource compiler (added -n to OS2RCFLAGS).
                Added linkage macro for the OS2RC which exepacks the resource
                object: OS2RCLFLAGS

 2000-09-01: Patrick Haller <phaller@gmx.net>
    - GDI32:  - Open32 fix for CreateDIBitmap: some apps claim they have
                a bitmap w/o palette color table and then send one in to copy.
    - USER32: - PMWINDOW.CPP: WM_FOCUSCHANCE - validate GetTopParent() handle

